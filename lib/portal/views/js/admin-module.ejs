angular.module(
	'acre', 
	[
		'ui.bootstrap', 
		'restangular', 
		'formDirect', 
		'objectView'
	]
)
.config(
	function(
		$routeProvider, 
		RestangularProvider,
		$dialogProvider
	)
	{
			$routeProvider
		<%for(var i in models){
			var model = models[i];
		%>
		    .when('/<%=model.collection%>', {controller:<%=model.controllers.retrieve%>, templateUrl:'<%=model.views.retrieve%>'})
		    .when('/<%=model.collection%>/update/:id', {controller:<%=model.controllers.update%>, templateUrl:'<%=model.views.update%>'})
		    .when('/<%=model.collection%>/create', {controller:<%=model.controllers.create%>, templateUrl:'<%=model.views.create%>'})
		<%}%>
			.otherwise({redirectTo:'/'});
		      
			RestangularProvider.setBaseUrl('<%=apiRoute%>');
			RestangularProvider.setRestangularFields({
				id: '_id'
			});
			RestangularProvider.setResponseExtractor(function(response) {
			  var originalElement = _.clone(response);
			  for (i in originalElement)
			  {
			  	if (i.indexOf('$') === 0 || i === '__v')
			  	{
			  		delete originalElement[i];
			  	}
			  }
			  response.originalElement = originalElement;
			  return response;
			});

			$dialogProvider.options({
				backdrop: true,
				keyboard: true,
				backdropClick: true
			});
	}
);
