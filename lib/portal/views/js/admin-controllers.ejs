function dialogController($scope, dialog)
{
  $scope.close = function(data){
    dialog.close(data);
  };
}

function alertController($scope)
{
  $scope.alerts = [];

  $scope.close = function(index) {
    $scope.alerts.splice(index, 1);
  };

  $scope.$on('post-alert', function(event, type, msg){
	 $scope.alerts.push({type: type, msg: msg});
  });
}

function navigationController($scope)
{
  $scope.tabs = [
    <%
    for (var i in models)
    {
      var model = models[i];
    %>
      {title: inflect.capitalize('<%=model.collection%>'), active: false, model: '<%=model.collection%>', href: '#/<%=model.collection%>'}<%if (i < models.length - 1){%>,<%}%>
    <%
    }
    %>
  ];

  $scope.crumbs = [
  ];

  $scope.$on('$routeChangeSuccess', function (event, current, previous) {
    var i;

    for (i in $scope.tabs)
    {
      $scope.tabs[i].active = false;
    }
    $scope.crumbs.splice(0, $scope.crumbs.length);

    switch (current.loadedTemplateUrl)
    {
      <%
      for(i in models)
      {
        var model = models[i];
      %>
        case '<%=model.views.create%>':
        case '<%=model.views.retrieve%>':
        case '<%=model.views.update%>':
          for (i in $scope.tabs)
          {
            if ($scope.tabs[i].model === '<%=model.collection%>')
            {
              $scope.tabs[i].active = true;
            }
          }

          if (current.loadedTemplateUrl === '<%=model.views.update%>')
          {
            $scope.crumbs.push({active: false, href: '#/<%=model.collection%>', title: 'All ' + inflect.capitalize('<%=model.collection%>')});
            $scope.crumbs.push({active: true, href: '#', title: current.params.id});
          }
          else if (current.loadedTemplateUrl === '<%=model.views.create%>')
          {
            $scope.crumbs.push({active: false, href: '#', title: 'All ' + inflect.capitalize('<%=model.collection%>')});
          }
          else
          {
            $scope.crumbs.push({active: true, href: '#', title: 'All ' + inflect.capitalize('<%=model.collection%>')});
          }
          break;
      <%
      }
      %>
    }
  });
}